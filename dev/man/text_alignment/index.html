<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Text Alignment · Yunir.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="Yunir.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="Yunir.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Yunir.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../basic_utilities/">Basic Utilities</a></li><li><a class="tocitem" href="../orthography/">Orthographical Analysis</a></li><li><a class="tocitem" href="../qurantree/">Working with QuranTree.jl</a></li><li class="is-active"><a class="tocitem" href>Text Alignment</a><ul class="internal"><li><a class="tocitem" href="#How-it-works"><span>How it works</span></a></li><li><a class="tocitem" href="#KITAB-project&#39;s-text-reuse"><span>KITAB project&#39;s text reuse</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Text Alignment</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Text Alignment</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/alstat/Yunir.jl/blob/main/docs/src/man/text_alignment.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Text-Alignment"><a class="docs-heading-anchor" href="#Text-Alignment">Text Alignment</a><a id="Text-Alignment-1"></a><a class="docs-heading-anchor-permalink" href="#Text-Alignment" title="Permalink"></a></h1><p>Text alignment is used for pairwise comparison of texts (e.g. books), with the aim of checking for deletions, insertions, matches and mismatches in the target texts relative to a reference texts. This is the same task as sequence alignment of two DNA sequence as in Biology. Indeed, Yunir.jl supports this by extending the <a href="https://github.com/BioJulia/BioAlignments.jl">BioAlignments.jl</a> APIs  to sequence of Arabic texts. Yunir.jl uses <code>align</code> function for aligning two texts.</p><h2 id="How-it-works"><a class="docs-heading-anchor" href="#How-it-works">How it works</a><a id="How-it-works-1"></a><a class="docs-heading-anchor-permalink" href="#How-it-works" title="Permalink"></a></h2><p>The way it works is that, <a href="https://github.com/BioJulia/BioAlignments.jl">BioAlignments.jl</a> requires a Roman characters as input for pairwise alignment. Therefore, any Arabic characters must first be transliterated to Roman characters. This is possible using Yunir.jl&#39;s <code>encode</code> function. The resulting alignment, which is in Roman characters, is then transliterated back to Arabic for easy interpretation.</p><h2 id="KITAB-project&#39;s-text-reuse"><a class="docs-heading-anchor" href="#KITAB-project&#39;s-text-reuse">KITAB project&#39;s text reuse</a><a id="KITAB-project&#39;s-text-reuse-1"></a><a class="docs-heading-anchor-permalink" href="#KITAB-project&#39;s-text-reuse" title="Permalink"></a></h2><p>We will consider a simple example based on &quot;text reuse&quot; case study of <a href="https://kitab-project.org/methods/text-reuse">KITAB project</a>. The following are portions of two books with IDs Shamela0012129-ara1 and Shamela0023790-ara1. The goal is to compare the two by aligning the characters, and see the similarity based on matches, mismatches, deletions and insertions of characters.</p><table>
    <thead>
        <th>Shamela0012129-ara1</th>
        <th>Shamela0023790-ara1</th>
    </thead>
    <tbody>
        <tr>
            <td>خرج مع ابي بكر الصديق رضي الله عنه في تجارة الي بصري ومعهم نعيمان وكان نعيمان ممن شهد——- بدرا ايضا وك——-ان علي الزاد فقال له سويبط———– اطعمني فقال حتي يجء ابو بكر فقال اما والله لاغيظنك فمروا بقوم فقال لهم سويبط -تشترون مني عبدا قا—لوا نعم فقال انه عبد له كلام وهو قاءل لكم اني حر فان كنتم اذا قال لكم هذه المقالة تركتموه فلا تفسدوا علي عبدي قا-لوا بل نشتريه منك فاشتروه بعشر قلاءص ثم جاءوا فوضعوا في عنقه حبلا ف—————قال نعيمان ان هذا يستهزء بكم واني حر فقالوا قد عرفنا –خبرك وانطلقوا به فلما جاء ابو بكر -اخبروه فاتبعهم ورد عليهم القلاءص واخذه فلما قدموا علي النبي صلي الله عليه وسلم اخبروه فضحك هو واصحابه من ذلك حولا</td>
            <td>خرج— ابو بكر——————– في تجارة——— ومعه- نعيمان وسويبط بن حرملة وكانا شهدا بدر—–ا وكان نعيمان علي الزاد فقال له سويبط وكان مزاحا اطعمني فقال حتي يجء ابو بكر فقال اما والله لاغيظنك فمروا بقوم فقال لهم سويبط اتشترون مني عبدا لي قالوا نعم ق-ال انه عبد له كلام وهو قاءل لكم اني حر فان كنتم اذا قال لكم هذه المقالة تركتموه فلا تفسدوا علي عبدي فقالوا بل نشتريه منك——– بعشر قلاءص ثم جاءوا فوضعوا في عنقه حبلا وعمامة واشتروه فقال نعيمان ان هذا يستهزء بكم واني حر قا-لوا قد اخبرنا بخبرك وانطلقوا به و—-جاء ابو بكر فاخبروه فاتبعهم فرد عليهم القلاءص واخذه فلما قدموا علي النبي صلي الله عليه وسلم اخبروه فضحك هو واصحابه منهما- حول</td>
        </tr>
    </tbody>
</table><h3 id="Data-processing"><a class="docs-heading-anchor" href="#Data-processing">Data processing</a><a id="Data-processing-1"></a><a class="docs-heading-anchor-permalink" href="#Data-processing" title="Permalink"></a></h3><p>To have a quality output, we will need to process the texts to remove unnecessary noise. First, we need to remove all non-Arabic characters. The following will input the two candidate books:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Yunir</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0012129 = &quot;خرج مع ابي بكر الصديق رضي الله عنه في تجارة الي بصري ومعهم نعيمان وكان نعيمان ممن شهد——- بدرا ايضا وك——-ان علي الزاد فقال له سويبط———– اطعمني فقال حتي يجء ابو بكر فقال اما والله لاغيظنك فمروا بقوم فقال لهم سويبط -تشترون مني عبدا قا—لوا نعم فقال انه عبد له كلام وهو قاءل لكم اني حر فان كنتم اذا قال لكم هذه المقالة تركتموه فلا تفسدوا علي عبدي قا-لوا بل نشتريه منك فاشتروه بعشر قلاءص ثم جاءوا فوضعوا في عنقه حبلا ف—————قال نعيمان ان هذا يستهزء بكم واني حر فقالوا قد عرفنا –خبرك وانطلقوا به فلما جاء ابو بكر -اخبروه فاتبعهم ورد عليهم القلاءص واخذه فلما قدموا علي النبي صلي الله عليه وسلم اخبروه فضحك هو واصحابه من ذلك حولا&quot;;</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0023790 = &quot;خرج— ابو بكر——————– في تجارة——— ومعه- نعيمان وسويبط بن حرملة وكانا شهدا بدر—–ا وكان نعيمان علي الزاد فقال له سويبط وكان مزاحا اطعمني فقال حتي يجء ابو بكر فقال اما والله لاغيظنك فمروا بقوم فقال لهم سويبط اتشترون مني عبدا لي قالوا نعم ق-ال انه عبد له كلام وهو قاءل لكم اني حر فان كنتم اذا قال لكم هذه المقالة تركتموه فلا تفسدوا علي عبدي فقالوا بل نشتريه منك——– بعشر قلاءص ثم جاءوا فوضعوا في عنقه حبلا وعمامة واشتروه فقال نعيمان ان هذا يستهزء بكم واني حر قا-لوا قد اخبرنا بخبرك وانطلقوا به و—-جاء ابو بكر فاخبروه فاتبعهم فرد عليهم القلاءص واخذه فلما قدموا علي النبي صلي الله عليه وسلم اخبروه فضحك هو واصحابه منهما- حول&quot;;</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>Next, we remove the non-Arabic characters like the dashes using the <code>clean</code> function:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0012129_cln = clean(shamela0012129)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;خرج مع ابي بكر الصديق رضي الله عنه في تجارة الي بصري ومعهم نعيمان وكان نعيمان ممن شهد بدرا ايضا وكان علي الزاد فقال له سويبط اطعمني فقال حتي يجء ابو بكر فقال اما والله لاغيظنك فمروا بقوم فقال لهم سويبط تشترون مني عبدا قالوا نعم فقال انه عبد له كلام وهو قاءل لكم اني حر فا&quot; ⋯ 105 bytes ⋯ &quot; قالوا بل نشتريه منك فاشتروه بعشر قلاءص ثم جاءوا فوضعوا في عنقه حبلا فقال نعيمان ان هذا يستهزء بكم واني حر فقالوا قد عرفنا خبرك وانطلقوا به فلما جاء ابو بكر اخبروه فاتبعهم ورد عليهم القلاءص واخذه فلما قدموا علي النبي صلي الله عليه وسلم اخبروه فضحك هو واصحابه من ذلك حولا&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0023790_cln = clean(shamela0023790)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;خرج ابو بكر في تجارة ومعه نعيمان وسويبط بن حرملة وكانا شهدا بدرا وكان نعيمان علي الزاد فقال له سويبط وكان مزاحا اطعمني فقال حتي يجء ابو بكر فقال اما والله لاغيظنك فمروا بقوم فقال لهم سويبط اتشترون مني عبدا لي قالوا نعم قال انه عبد له كلام وهو قاءل لكم اني حر فان كنتم اذا&quot; ⋯ 94 bytes ⋯ &quot;لوا بل نشتريه منك بعشر قلاءص ثم جاءوا فوضعوا في عنقه حبلا وعمامة واشتروه فقال نعيمان ان هذا يستهزء بكم واني حر قالوا قد اخبرنا بخبرك وانطلقوا به وجاء ابو بكر فاخبروه فاتبعهم فرد عليهم القلاءص واخذه فلما قدموا علي النبي صلي الله عليه وسلم اخبروه فضحك هو واصحابه منهما حول&quot;</code></pre><div class="admonition is-category-tips"><header class="admonition-header">Tips</header><div class="admonition-body"><p>The <code>clean</code> function removes the non-Arabic characters through regex, which is set at the third argument of the function. That is, <code>clean(shamela0012129)</code> is actually equivalent to:</p><pre><code class="language-julia hljs">clean(shamela0012129; replace_non_ar=&quot;&quot;, target_regex=r&quot;[A-Za-z0-9\(:×\|\–\[\«\»\]~\)_@./#&amp;+\—-]*&quot;)</code></pre><p>In case there are still non-Arabic characters not captured using the default regex, simply insert it to the default pattern.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Caution</header><div class="admonition-body"><p>It is important that all non-Arabic characters be removed since any special character might be transliterated to a particular Arabic character once transliterating the output back to Arabic, and the result might mislead. See the section &quot;How it works&quot; above.</p></div></div><p>Next, we need to expand the special Arabic characters such as Allah, الله, since some text editors combines this into the unicode <a href="https://www.compart.com/en/unicode/U+FDF2">U+FDF2</a>. This is also true with Lam-Alif, ﻻ, <a href="https://www.compart.com/en/unicode/U+FEFB">U+FEFB</a>. We will add space between these letters to display the alignment of the characters properly, with a caveat that it should be understood that these characters are connected when encountering their sequence in the output. So that, &quot;الله&quot; becomes &quot;ا ل ل ه&quot; and &quot;ﻻ&quot; becomes &quot;ل ا&quot; in the output. The function to use is <code>expand_archars</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0012129_exp = expand_archars(shamela0012129_cln)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;خرج مع ابي بكر الصديق رضي ا ل ل ه عنه في تجارة الي بصري ومعهم نعيمان وكان نعيمان ممن شهد بدرا ايضا وكان علي الزاد فقال له سويبط اطعمني فقال حتي يجء ابو بكر فقال اما وا ل ل ه ل اغيظنك فمروا بقوم فقال لهم سويبط تشترون مني عبدا قالوا نعم فقال انه عبد له كل ام وهو قاءل لكم ا&quot; ⋯ 132 bytes ⋯ &quot;بل نشتريه منك فاشتروه بعشر قل اءص ثم جاءوا فوضعوا في عنقه حبل ا فقال نعيمان ان هذا يستهزء بكم واني حر فقالوا قد عرفنا خبرك وانطلقوا به فلما جاء ابو بكر اخبروه فاتبعهم ورد عليهم القل اءص واخذه فلما قدموا علي النبي صلي ا ل ل ه عليه وسلم اخبروه فضحك هو واصحابه من ذلك حول ا&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0023790_exp = expand_archars(shamela0023790_cln)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;خرج ابو بكر في تجارة ومعه نعيمان وسويبط بن حرملة وكانا شهدا بدرا وكان نعيمان علي الزاد فقال له سويبط وكان مزاحا اطعمني فقال حتي يجء ابو بكر فقال اما وا ل ل ه ل اغيظنك فمروا بقوم فقال لهم سويبط اتشترون مني عبدا لي قالوا نعم قال انه عبد له كل ام وهو قاءل لكم اني حر فان كنت&quot; ⋯ 115 bytes ⋯ &quot; نشتريه منك بعشر قل اءص ثم جاءوا فوضعوا في عنقه حبل ا وعمامة واشتروه فقال نعيمان ان هذا يستهزء بكم واني حر قالوا قد اخبرنا بخبرك وانطلقوا به وجاء ابو بكر فاخبروه فاتبعهم فرد عليهم القل اءص واخذه فلما قدموا علي النبي صلي ا ل ل ه عليه وسلم اخبروه فضحك هو واصحابه منهما حول&quot;</code></pre><h3 id="Encoding"><a class="docs-heading-anchor" href="#Encoding">Encoding</a><a id="Encoding-1"></a><a class="docs-heading-anchor-permalink" href="#Encoding" title="Permalink"></a></h3><p>As emphasized above, Yunir.jl is based on <a href="https://github.com/BioJulia/BioAlignments.jl">BioAlignments.jl</a> APIs to do the pairwise alignment. To do this, <a href="https://github.com/BioJulia/BioAlignments.jl">BioAlignments.jl</a> requires  a Roman character input. Therefore, the input Arabic texts need to be encoded or transliterated to Roman characters.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0012129_enc = encode(shamela0012129_exp)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;xrj mE Aby bkr AlSdyq rDy A l l h Enh fy tjArp Aly bSry wmEhm nEymAn wkAn nEymAn mmn \$hd bdrA AyDA wkAn Ely AlzAd fqAl lh swybT ATEmny fqAl Hty yj&#39; Abw bkr fqAl AmA wA l l h l AgyZnk fmrwA bqwm fqAl lhm swybT t\$trwn mny EbdA qAlwA nEm fqAl Anh Ebd lh kl Am whw qA&#39;l lkm A&quot; ⋯ 73 bytes ⋯ &quot; bl n\$tryh mnk fA\$trwh bE\$r ql A&#39;S vm jA&#39;wA fwDEwA fy Enqh Hbl A fqAl nEymAn An h*A ysthz&#39; bkm wAny Hr fqAlwA qd ErfnA xbrk wAnTlqwA bh flmA jA&#39; Abw bkr Axbrwh fAtbEhm wrd Elyhm Alql A&#39;S wAx*h flmA qdmwA Ely Alnby Sly A l l h Elyh wslm Axbrwh fDHk hw wASHAbh mn *lk Hwl A&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; shamela0023790_enc = encode(shamela0023790_exp)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;xrj Abw bkr fy tjArp wmEh nEymAn wswybT bn Hrmlp wkAnA \$hdA bdrA wkAn nEymAn Ely AlzAd fqAl lh swybT wkAn mzAHA ATEmny fqAl Hty yj&#39; Abw bkr fqAl AmA wA l l h l AgyZnk fmrwA bqwm fqAl lhm swybT At\$trwn mny EbdA ly qAlwA nEm qAl Anh Ebd lh kl Am whw qA&#39;l lkm Any Hr fAn knt&quot; ⋯ 63 bytes ⋯ &quot;l n\$tryh mnk bE\$r ql A&#39;S vm jA&#39;wA fwDEwA fy Enqh Hbl A wEmAmp wA\$trwh fqAl nEymAn An h*A ysthz&#39; bkm wAny Hr qAlwA qd AxbrnA bxbrk wAnTlqwA bh wjA&#39; Abw bkr fAxbrwh fAtbEhm frd Elyhm Alql A&#39;S wAx*h flmA qdmwA Ely Alnby Sly A l l h Elyh wslm Axbrwh fDHk hw wASHAbh mnhmA Hwl&quot;</code></pre><h3 id="Alignment"><a class="docs-heading-anchor" href="#Alignment">Alignment</a><a id="Alignment-1"></a><a class="docs-heading-anchor-permalink" href="#Alignment" title="Permalink"></a></h3><p>Finally, we can do the alignment as follows:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; res = align(shamela0012129_enc, shamela0023790_enc);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; res</code><code class="nohighlight hljs ansi" style="display:block;">PairwiseAlignment
١-reference
٢-target

٢    خرجـــ ابو بكـــــــــرــــــــــــــ في تجارةـــــــــ ومع
     ااا   ااا ااا         ا              ااااااااا         اااا
١    خرج مع ابي بكر الصديق رضي ا ل ل ه عنه في تجارة الي بصري ومع

٢    ـ نعيمان وسويبط بن ـحرملة وكانـــا شهدا بدرا وكاــن نعيمان
      اااااااا  ا     اا   ا     اا    اااا اااااا  ا   ا    ااا
١    م نعيمان ــوـــكان نعيمـــــان ممن شهدـ بدرا ــايضا ــوكان

٢    لي الزاد فقال له سويبط وكان مزاحا اطعمني فقال حتي يجء ابو ب
     اااااااااااااااااااااا           اااااااااااااااااااااااااا
١    لي الزاد فقال له سويبطـــــــــــ اطعمني فقال حتي يجء ابو ب

٢    ر فقال اما وا ل ل ه ل اغيظنك فمروا بقوم فقال لهم سويبط اتشت
     ااااااااااااااااااااااااااااااااااااااااااااااااااااااا ااا
١    ر فقال اما وا ل ل ه ل اغيظنك فمروا بقوم فقال لهم سويبط ـتشت

٢    ون مني عبدا لي قالوا نعم ـقال انه عبد له كل ام وهو قاءل لكم
     ااااااااااا   ااااااااااا ااااااااااااااااااااااااااااااااا
١    ون مني عبداـــ قالوا نعم فقال انه عبد له كل ام وهو قاءل لكم

٢    اني حر فان كنتم اذا قال لكم هذه المقالة تركتموه فل ا تفسدوا
     ااااااااااااااااااااااااااااااااااااااااااااااااااااااااااا
١    اني حر فان كنتم اذا قال لكم هذه المقالة تركتموه فل ا تفسدوا

٢    علي عبدي فقالوا بل نشتريه منكــــــــ بعشر قل اءص ثم جاءوا
     ااااااااا ااااااااااااااااااا        اااااااااااااااااااااا
١    علي عبدي ـقالوا بل نشتريه منك فاشتروه بعشر قل اءص ثم جاءوا

٢    وضعوا في عنقه حبل ا وعمامة واشتروه فقال نعيمان ان هذا يستهز
     ااااااااااااااااا         ا ا     ااااااااااااااااااااااااا
١    وضعوا في عنقه حبلـــــــــ ـاـــــ فقال نعيمان ان هذا يستهز

٢     بكم واني حر ـقالوا قد اخبرـنا بخبرك وانطلقوا به ــــوجاء ا
     ااااااااااااا ااااااااا   ا ااا ااااااااااااااااا     ااااا
١     بكم واني حر فقالوا قد ــعرفنا ـخبرك وانطلقوا به فلما جاء ا

٢    و بكر فاخبروه فاتبعهم فرد عليهم القل اءص واخذه فلما قدموا ع
     اااااا ااااااااااااااا اااااااااااااااااااااااااااااااااااا
١    و بكر ـاخبروه فاتبعهم ورد عليهم القل اءص واخذه فلما قدموا ع

٢    ي النبي صلي ا ل ل ه عليه وسلم اخبروه فضحك هو واصحابه منـهما
     ااااااااااااااااااااااااااااااااااااااااااااااااااااااا
١    ي النبي صلي ا ل ل ه عليه وسلم اخبروه فضحك هو واصحابه من ذلك</code></pre><p>Unfortunately, many software and text editors including the Julia REPL  have default left-to-right printing, and hence the alignment above is not clear. What you can do is to copy the output above and paste it into a text editor with Arabic Monospace font (e.g. <a href="https://makkuk.com/kawkab-mono/#:~:text=Kawkab%20Mono%20(%D9%83%D9%88%D9%83%D8%A8%20%D9%85%D9%88%D9%86%D9%88)%20is,a%20void%20in%20this%20niche.">Kawkab font</a>), and set it to right-justified. Here is the result under macOS&#39;s Text Editor (after setting the page to right-justified):</p><p><img src="../../assets/alignment1.png" alt="Alignment-Output-in-Text-Editor"/></p><p>The result of the alignment is a list of groups of reference text indicated by the Arabic  character ١, and the target texts indicated by the Arabic character ٢. If the characters of reference and target match, a Alif (i.e., ا) between their rows is placed. Further, if a tatweel (i.e., &quot;ـ&quot;) is present in the target text, it means those tatweels represent the deletion of characters from the reference text. On the other hand, if a tatweel is present in the reference text, it means an insertion of characters was done in the target text. Lastly, if both characters of target and reference texts do not match, a space is inserted between their rows.</p><h3 id="Alignment-in-Buckwalter"><a class="docs-heading-anchor" href="#Alignment-in-Buckwalter">Alignment in Buckwalter</a><a id="Alignment-in-Buckwalter-1"></a><a class="docs-heading-anchor-permalink" href="#Alignment-in-Buckwalter" title="Permalink"></a></h3><p>We can actually extract the encoded version, which is in Buckwalter transliteration mapping. This can be accessed via the <code>.alignment</code> property of the <code>res</code> above. That is,</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; res.alignment</code><code class="nohighlight hljs ansi" style="display:block;">BioAlignments.PairwiseAlignment{String, String}:
  seq:   1 xrj--- Abw bk---------r-------------- fy tjArp--------- wmEh  25
           |||   ||| |||         |              |||||||||         |||||
  ref:   1 xrj mE Aby bkr AlSdyq rDy A l l h Enh fy tjArp Aly bSry wmEh  60

  seq:  25 - nEymAn wswybT bn -Hrmlp wkAn---A $hdA bdrA wkA--n nEymAn E  78
            ||||||||  |     ||   |     ||    |||| ||||||  |   |    ||||
  ref:  61 m nEymAn --w---kAn nEym-----An mmn $hd- bdrA --AyDA --wkAn E 105

  seq:  79 ly AlzAd fqAl lh swybT wkAn mzAHA ATEmny fqAl Hty yj&#39; Abw bk 138
           ||||||||||||||||||||||           |||||||||||||||||||||||||||
  ref: 106 ly AlzAd fqAl lh swybT----------- ATEmny fqAl Hty yj&#39; Abw bk 154

  seq: 139 r fqAl AmA wA l l h l AgyZnk fmrwA bqwm fqAl lhm swybT At$tr 198
           ||||||||||||||||||||||||||||||||||||||||||||||||||||||| ||||
  ref: 155 r fqAl AmA wA l l h l AgyZnk fmrwA bqwm fqAl lhm swybT -t$tr 213

  seq: 199 wn mny EbdA ly qAlwA nEm -qAl Anh Ebd lh kl Am whw qA&#39;l lkm  257
           |||||||||||   ||||||||||| ||||||||||||||||||||||||||||||||||
  ref: 214 wn mny EbdA--- qAlwA nEm fqAl Anh Ebd lh kl Am whw qA&#39;l lkm  270

  seq: 258 Any Hr fAn kntm A*A qAl lkm h*h AlmqAlp trktmwh fl A tfsdwA  317
           ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
  ref: 271 Any Hr fAn kntm A*A qAl lkm h*h AlmqAlp trktmwh fl A tfsdwA  330

  seq: 318 Ely Ebdy fqAlwA bl n$tryh mnk-------- bE$r ql A&#39;S vm jA&#39;wA f 369
           ||||||||| |||||||||||||||||||        |||||||||||||||||||||||
  ref: 331 Ely Ebdy -qAlwA bl n$tryh mnk fA$trwh bE$r ql A&#39;S vm jA&#39;wA f 389

  seq: 370 wDEwA fy Enqh Hbl A wEmAmp wA$trwh fqAl nEymAn An h*A ysthz&#39; 429
           |||||||||||||||||         | |     ||||||||||||||||||||||||||
  ref: 390 wDEwA fy Enqh Hbl--------- -A----- fqAl nEymAn An h*A ysthz&#39; 434

  seq: 430  bkm wAny Hr -qAlwA qd Axbr-nA bxbrk wAnTlqwA bh ----wjA&#39; Ab 483
           ||||||||||||| |||||||||   | ||| |||||||||||||||||     ||||||
  ref: 435  bkm wAny Hr fqAlwA qd --ErfnA -xbrk wAnTlqwA bh flmA jA&#39; Ab 491

  seq: 484 w bkr fAxbrwh fAtbEhm frd Elyhm Alql A&#39;S wAx*h flmA qdmwA El 543
           |||||| ||||||||||||||| |||||||||||||||||||||||||||||||||||||
  ref: 492 w bkr -Axbrwh fAtbEhm wrd Elyhm Alql A&#39;S wAx*h flmA qdmwA El 550

  seq: 544 y Alnby Sly A l l h Elyh wslm Axbrwh fDHk hw wASHAbh mn-hmA  602
           |||||||||||||||||||||||||||||||||||||||||||||||||||||||    |
  ref: 551 y Alnby Sly A l l h Elyh wslm Axbrwh fDHk hw wASHAbh mn *lk  610

  seq: 603 Hwl-- 605
           |||
  ref: 611 Hwl A 615</code></pre><p>This is the same with the result above, but this one is the Buckwalter encoded Arabic input.</p><p>The number in the left side is the index of the first character in the row, whereas the number in the right side is the index of the last character in the row.</p><h3 id="Alignment-statistics"><a class="docs-heading-anchor" href="#Alignment-statistics">Alignment statistics</a><a id="Alignment-statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Alignment-statistics" title="Permalink"></a></h3><p>From the results above, we can extract the score of alignment which is a  distance measure between the reference and the target texts. The lower the score the similar the two texts therefore.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; score(res)</code><code class="nohighlight hljs ansi" style="display:block;">65</code></pre><p>Other statistics are as follows</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; count_matches(res)</code><code class="nohighlight hljs ansi" style="display:block;">540</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; count_mismatches(res)</code><code class="nohighlight hljs ansi" style="display:block;">15</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; count_insertions(res)</code><code class="nohighlight hljs ansi" style="display:block;">50</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; count_deletions(res)</code><code class="nohighlight hljs ansi" style="display:block;">60</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; count_aligned(res)</code><code class="nohighlight hljs ansi" style="display:block;">665</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../qurantree/">« Working with QuranTree.jl</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Monday 27 June 2022 03:59">Monday 27 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
